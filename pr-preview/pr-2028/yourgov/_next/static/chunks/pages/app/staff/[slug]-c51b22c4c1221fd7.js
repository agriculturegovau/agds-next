(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8028],{96878:function(e,t,n){"use strict";n.d(t,{Wr:function(){return a},NW:function(){return l},RO:function(){return c},oc:function(){return o}});var r=n(19631),i=n(87800);function o(e){var t=e.children;return(0,i.tZ)(r.k,{as:"dt",color:"text",flexShrink:0,fontSize:"sm",fontWeight:"bold",minWidth:"200px",width:["100%","30%"],children:t})}function c(e){var t=e.children;return(0,i.tZ)(r.k,{as:"dd",color:"text",flexGrow:1,fontSize:"sm",children:t})}function a(e){var t=e.children;return(0,i.tZ)(r.k,{as:"dl",borderColor:"muted",borderTop:!0,flexDirection:"column",width:"100%",children:t})}function l(e){var t=e.children;return(0,i.tZ)(r.k,{borderBottom:!0,borderColor:"muted",flexDirection:["column","row"],gap:.5,paddingY:.75,children:t})}},41792:function(e,t,n){"use strict";n.d(t,{E:function(){return u}});var r=n(27378),i=n(58229),o=n(92288),c=n(25294),a=n(87600),l=n(87800);function u(e){var t=e.isOpen,n=e.itemsToDelete,u=e.onClose,s=e.onConfirm,d=(0,r.useState)(!1),f=d[0],m=d[1],h=(0,r.useMemo)(function(){return Array.isArray(n)?{title:"Are you sure you want to remove access for ".concat(n.length," staff ").concat((0,a.Ho)(n.length,"member","members"),"?"),description:"Access will be removed immediately. You can not undo this action."}:{title:"Are you sure you want to remove access for ".concat(n.name,"?"),description:"Access will be removed immediately. You can not undo this action."}},[n]),p=h.title,b=h.description;return(0,l.tZ)(c.u,{actions:(0,l.BX)(i.hE,{children:[(0,l.tZ)(i.zx,{loading:f,onClick:function(){m(!0),setTimeout(function(){m(!1),s()},1500)},children:"Remove access"}),(0,l.tZ)(i.zx,{onClick:u,variant:"secondary",children:"Cancel"})]}),isOpen:t,onClose:u,title:p,children:(0,l.tZ)(o.x,{as:"p",children:b})})}},87600:function(e,t,n){"use strict";n.d(t,{Ho:function(){return o},KD:function(){return r},UO:function(){return i}});var r=function(e){var t=e.loading,n=e.totalItems,r=e.pagination;if(t)return"Staff members";var i=1===n?"1 item":"".concat(n," items"),o=(r.page-1)*r.perPage+1,c=(r.page-1)*r.perPage+r.perPage;return c>n?"Staff members (".concat(i,")"):"Staff members (".concat(o," - ").concat(c," of ").concat(i,")")},i={Active:{label:"Active",tone:"success"},Invited:{label:"Invited",tone:"info"},Paused:{label:"Paused",tone:"neutral"}},o=function(e,t,n){return 1===e?t:n}},93943:function(e,t,n){"use strict";n.r(t);var r=n(90849),i=n(23982),o=n(27378),c=n(86677),a=n(88039),l=n(32324),u=n(23969),s=n(96778),d=n(92288),f=n(58229),m=n(72320),h=n(52949),p=n(99682),b=n(78010),g=n(28283),v=n(7150),Z=n(73933),y=n(96878),O=n(42434),w=n(48050),C=n(33040),k=n(38734),B=n(76002),x=n(97145),S=n(93e3),X=n(94906),P=n(41792),E=n(75583),D=n(87800);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var j=function(){var e=(0,c.useRouter)(),t=(0,S.M)(),n=t.staffMembersGetState,r=t.staffMembersUpdate,k=(0,o.useState)(!1),M=k[0],j=k[1],_=(0,o.useMemo)(function(){return n().find(function(t){return t.name.toLowerCase().replaceAll(" ","-")===e.query.slug})},[e,n]),N=(0,a.cI)({defaultValues:{role:null==_?void 0:_.role,trainingCompleted:null==_?void 0:_.trainingCompleted},resolver:(0,l.F)(x.pp),mode:"onSubmit",reValidateMode:"onBlur"}),W=N.register,z=N.handleSubmit,R=N.reset;(0,o.useEffect)(function(){R({role:null==_?void 0:_.role,trainingCompleted:null==_?void 0:_.trainingCompleted})},[R,_]);var A=(0,o.useState)(!1),I=A[0],H=A[1];return _?(0,D.BX)(o.Fragment,{children:[(0,D.tZ)(C.$,{title:"View ".concat(_.name," | Staff")}),(0,D.BX)(u.JH,{children:[(0,D.BX)(s.K,{gap:3,children:[(0,D.tZ)(g.z,{direction:"left",href:"/app/staff",children:"Back"}),(0,D.BX)(s.K,{alignItems:"start",gap:1.5,children:[(0,D.tZ)(B.V,{introduction:(0,D.BX)(d.x,{children:["Change role or remove access for"," ",(0,D.tZ)(d.x,{fontSize:"md",fontWeight:"bold",children:_.name}),"."]}),title:_.name}),(0,D.tZ)(v.O,{label:"Invited",tone:"infoMedium"})]}),(0,D.BX)(s.K,{gap:2,children:[(0,D.tZ)(Z.H2,{children:"Personal details"}),(0,D.BX)(y.Wr,{children:[(0,D.BX)(y.NW,{children:[(0,D.tZ)(y.oc,{children:"Name"}),(0,D.tZ)(y.RO,{children:_.name})]}),(0,D.BX)(y.NW,{children:[(0,D.tZ)(y.oc,{children:"Email"}),(0,D.tZ)(y.RO,{children:_.email})]}),(0,D.BX)(y.NW,{children:[(0,D.tZ)(y.oc,{children:"Mobile number"}),(0,D.tZ)(y.RO,{children:_.mobile})]}),_.dateJoined&&(0,D.BX)(y.NW,{children:[(0,D.tZ)(y.oc,{children:"Date joined"}),(0,D.tZ)(y.RO,{children:(0,i.Z)(new Date(_.dateJoined),"d MMMM yyyy")})]})]})]}),(0,D.BX)(s.K,{gap:2,children:[(0,D.tZ)(Z.H2,{children:"Remove access"}),(0,D.tZ)(d.x,{as:"p",id:"remove-access-description",children:"Remove this personâ€˜s access to your business. You can invite them again at any time."}),(0,D.BX)(f.zx,{alignSelf:"start","aria-describedby":"remove-access-description",onClick:function(){j(!0)},size:"sm",variant:"secondary",children:["Remove ",_.name]})]}),(0,D.BX)(s.K,{as:"form",gap:2,noValidate:!0,onSubmit:z(function(t){H(!0),setTimeout(function(){H(!1),r({staffToUpdate:_,updates:t}),e.push("/app/staff?successType=update&staffId=".concat(_.id))},1500)}),children:[(0,D.tZ)(Z.H2,{children:"Change role"}),(0,D.tZ)(O.P,{iconBefore:!0,label:"Understanding the permissions for each role",children:(0,D.tZ)(E.u,{})}),(0,D.tZ)(p.e,{block:!0,label:"Export service role",required:!0,children:["Manager","Employee","Trainee","Work experience"].map(function(e){return(0,D.tZ)(h.Y,T(T({},W("role")),{},{value:e,children:e}),e)})}),(0,D.tZ)(Z.H2,{children:"Training completed"}),(0,D.tZ)(p.e,{block:!0,label:"Training completed",children:["Deliveries","Distribution","Ice cream making","Packaging"].map(function(e){return(0,D.tZ)(b.X,T(T({},W("trainingCompleted")),{},{value:e,children:e}),e)})}),(0,D.tZ)(w.xu,{paddingY:1,children:(0,D.tZ)(m.i,{})}),(0,D.BX)(f.hE,{children:[(0,D.tZ)(f.zx,{loading:I,type:"submit",children:"Save changes"}),(0,D.tZ)(f.zx,{onClick:function(){e.push("/app/staff")},variant:"tertiary",children:"Cancel"})]})]})]}),(0,D.tZ)(P.E,{isOpen:M,itemsToDelete:_,onClose:function(){return j(!1)},onConfirm:function(){j(!1),e.push("/app/staff?successType=remove&staffId=".concat(_.id))}})]})]}):(0,D.tZ)(X.default,{})};t.default=j,j.getLayout=function(e){return(0,D.tZ)(k.L,{children:(0,D.tZ)(S.w,{children:e})})}},65385:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/staff/[slug]",function(){return n(93943)}])}},function(e){e.O(0,[1065,9073,3982,1854,6236,9678,5294,8734,8010,8927,6174,3895,2888,9774,179],function(){return e(e.s=65385)}),_N_E=e.O()}]);