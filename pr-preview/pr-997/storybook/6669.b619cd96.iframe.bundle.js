"use strict";(self.webpackChunkagds_next=self.webpackChunkagds_next||[]).push([[6669],{"./packages/react/src/date-picker/DateRangePicker.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>DateRangePicker});var _emotion_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),_home_runner_work_agds_next_agds_next_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),_home_runner_work_agds_next_agds_next_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),react_popper__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react-popper/lib/esm/usePopper.js"),_box__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/react/src/box/index.ts"),_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/react/src/core/index.ts"),_field__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/react/src/field/index.ts"),_a11y__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/react/src/a11y/index.ts"),_Calendar__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/react/src/date-picker/Calendar.tsx"),_DatePickerInput__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./packages/react/src/date-picker/DatePickerInput.tsx"),_utils__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./packages/react/src/date-picker/utils.ts"),_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){(0,_home_runner_work_agds_next_agds_next_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__.Z)(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}var _ref2={name:"1bfrawq",styles:"padding:0;margin:0;border:none"},_ref3={name:"1739oy8",styles:"z-index:1"},DateRangePicker=function DateRangePicker(_ref){var legend=_ref.legend,hint=_ref.hint,id=_ref.id,_ref$fromInvalid=_ref.fromInvalid,fromInvalid=void 0!==_ref$fromInvalid&&_ref$fromInvalid,_ref$toInvalid=_ref.toInvalid,toInvalid=void 0!==_ref$toInvalid&&_ref$toInvalid,message=_ref.message,hideOptionalLabel=_ref.hideOptionalLabel,value=_ref.value,onChange=_ref.onChange,disabled=_ref.disabled,_ref$fromLabel=_ref.fromLabel,fromLabel=void 0===_ref$fromLabel?"Start date":_ref$fromLabel,_ref$toLabel=_ref.toLabel,toLabel=void 0===_ref$toLabel?"End date":_ref$toLabel,_ref$required=_ref.required,required=void 0!==_ref$required&&_ref$required,minDate=_ref.minDate,maxDate=_ref.maxDate,fromInputRef=_ref.fromInputRef,toInputRef=_ref.toInputRef,yearRange=_ref.yearRange,onFromInputChangeProp=_ref.onFromInputChange,onToInputChangeProp=_ref.onToInputChange,_useTernaryState=(0,_core__WEBPACK_IMPORTED_MODULE_3__.useTernaryState)(!1),_useTernaryState2=(0,_home_runner_work_agds_next_agds_next_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_8__.Z)(_useTernaryState,3),isCalendarOpen=_useTernaryState2[0],openCalendar=_useTernaryState2[1],closeCalendar=_useTernaryState2[2],_useState=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(),inputMode=_useState[0],setInputMode=_useState[1],fromTriggerRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),toTriggerRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),onFromTriggerClick=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(){setInputMode("from"),openCalendar()}),[openCalendar]),onToTriggerClick=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(){setInputMode("to"),openCalendar()}),[openCalendar]),_useState2=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),refEl=_useState2[0],setRefEl=_useState2[1],_useState3=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null),popperEl=_useState3[0],setPopperEl=_useState3[1],_usePopper=(0,react_popper__WEBPACK_IMPORTED_MODULE_9__.D)(refEl,popperEl,{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,8]}}]}),styles=_usePopper.styles,attributes=_usePopper.attributes,valueAsDateOrUndefined=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((function(){return{from:"string"==typeof value.from?void 0:value.from,to:"string"==typeof value.to?void 0:value.to}}),[value]),onSelect=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(_,selectedDay,activeModifiers){if(inputMode&&!activeModifiers.disabled){var range=(0,_utils__WEBPACK_IMPORTED_MODULE_10__.NE)(inputMode,selectedDay,valueAsDateOrUndefined);if(onChange(range),setFromInputValue(range.from?(0,_utils__WEBPACK_IMPORTED_MODULE_10__.p6)(range.from):""),setToInputValue(range.to?(0,_utils__WEBPACK_IMPORTED_MODULE_10__.p6)(range.to):""),range.from&&range.to)return closeCalendar(),void setInputMode(void 0);"from"!==inputMode?"to"!==inputMode||range.from||setInputMode("from"):setInputMode("to")}}),[closeCalendar,inputMode,onChange,valueAsDateOrUndefined]),_useState4=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)((0,_utils__WEBPACK_IMPORTED_MODULE_10__.JF)(value.from)),fromInputValue=_useState4[0],setFromInputValue=_useState4[1],onFromInputChange=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(e){var inputValue=e.target.value;setFromInputValue(inputValue);var parsedDate=(0,_utils__WEBPACK_IMPORTED_MODULE_10__.sG)(inputValue),containedDate=(0,_utils__WEBPACK_IMPORTED_MODULE_10__.cD)(parsedDate,minDate,maxDate),nextValue=_objectSpread(_objectSpread({},valueAsDateOrUndefined),{},{from:containedDate});inputValue&&!containedDate?(onChange(nextValue),null==onFromInputChangeProp||onFromInputChangeProp(inputValue)):onChange(nextValue)}),[maxDate,minDate,onChange,valueAsDateOrUndefined,onFromInputChangeProp]),_useState5=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)((0,_utils__WEBPACK_IMPORTED_MODULE_10__.JF)(value.to)),toInputValue=_useState5[0],setToInputValue=_useState5[1],onToInputChange=(0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)((function(e){var inputValue=e.target.value;setToInputValue(inputValue);var parsedDate=(0,_utils__WEBPACK_IMPORTED_MODULE_10__.sG)(inputValue),containedDate=(0,_utils__WEBPACK_IMPORTED_MODULE_10__.cD)(parsedDate,minDate,maxDate),nextValue=_objectSpread(_objectSpread({},valueAsDateOrUndefined),{},{to:containedDate});inputValue&&!containedDate?(onChange(nextValue),null==onToInputChangeProp||onToInputChangeProp(inputValue)):onChange(nextValue)}),[maxDate,minDate,onChange,onToInputChangeProp,valueAsDateOrUndefined]);(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){setFromInputValue((0,_utils__WEBPACK_IMPORTED_MODULE_10__.JF)(value.from)),setToInputValue((0,_utils__WEBPACK_IMPORTED_MODULE_10__.JF)(value.to))}),[value]);var clickOutsideRef=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(popperEl);clickOutsideRef.current=popperEl,(0,_core__WEBPACK_IMPORTED_MODULE_3__.O8)(clickOutsideRef,closeCalendar),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((function(){var handleKeyDown=function handleKeyDown(e){isCalendarOpen&&"Escape"===e.code&&(e.preventDefault(),e.stopPropagation(),closeCalendar(),setInputMode(void 0))};return window.addEventListener("keydown",handleKeyDown),function(){return window.removeEventListener("keydown",handleKeyDown)}}),[isCalendarOpen,closeCalendar]);var disabledCalendarDays=(0,react__WEBPACK_IMPORTED_MODULE_1__.useMemo)((function(){if(minDate||maxDate)return[minDate?{before:minDate}:void 0,maxDate?{after:maxDate}:void 0].filter((function(x){return Boolean(x)}))}),[minDate,maxDate]),_useWindowSize$window=(0,_core__WEBPACK_IMPORTED_MODULE_3__.iP)().windowWidth,numberOfMonths=(void 0===_useWindowSize$window?0:_useWindowSize$window)>_core__WEBPACK_IMPORTED_MODULE_3__.tokens.breakpoint.md?2:1,invalid=fromInvalid||toInvalid,_useDateRangePickerId=useDateRangePickerIds(id),fieldsetId=_useDateRangePickerId.fieldsetId,hintId=_useDateRangePickerId.hintId,messageId=_useDateRangePickerId.messageId,describedByIds=[invalid&&message?messageId:null,hint?hintId:null].filter(Boolean),describedBy=describedByIds.length?describedByIds.join(" "):void 0;return(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.tZ)(_field__WEBPACK_IMPORTED_MODULE_4__.i$,{invalid,id:fieldsetId,children:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.BX)("fieldset",{"aria-describedby":describedBy,css:_ref2,children:[(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.tZ)(_field__WEBPACK_IMPORTED_MODULE_4__.Qy,{as:"legend",required,hideOptionalLabel,css:legend?void 0:_a11y__WEBPACK_IMPORTED_MODULE_5__.J,children:null!=legend?legend:"Date range"}),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.BX)(_box__WEBPACK_IMPORTED_MODULE_2__.Stack,{gap:.5,css:(0,_emotion_react__WEBPACK_IMPORTED_MODULE_12__.iv)({marginTop:legend?(0,_core__WEBPACK_IMPORTED_MODULE_3__.mapSpacing)(.5):void 0},"",""),children:[hint?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.tZ)(_field__WEBPACK_IMPORTED_MODULE_4__.J1,{id:hintId,children:hint}):null,message&&invalid?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.tZ)(_field__WEBPACK_IMPORTED_MODULE_4__.nd,{id:messageId,children:message}):null,(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.BX)(_box__WEBPACK_IMPORTED_MODULE_2__.Flex,{ref:setRefEl,flexDirection:{xs:"column",sm:"row"},inline:!0,gap:1,children:[(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.tZ)(_DatePickerInput__WEBPACK_IMPORTED_MODULE_7__.W,{ref:fromInputRef,label:fromLabel,value:fromInputValue,onChange:onFromInputChange,buttonRef:fromTriggerRef,buttonOnClick:onFromTriggerClick,disabled,required,invalid:{field:!1,input:fromInvalid}}),(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.tZ)(_DatePickerInput__WEBPACK_IMPORTED_MODULE_7__.W,{ref:toInputRef,label:toLabel,value:toInputValue,onChange:onToInputChange,buttonRef:toTriggerRef,buttonOnClick:onToTriggerClick,disabled,required,invalid:{field:!1,input:toInvalid}})]})]}),isCalendarOpen?(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.tZ)("div",_objectSpread(_objectSpread({ref:setPopperEl,style:styles.popper},attributes.popper),{},{css:_ref3,children:(0,_emotion_react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.tZ)(_Calendar__WEBPACK_IMPORTED_MODULE_6__.a,{initialFocus:!0,defaultMonth:valueAsDateOrUndefined.from,selected:valueAsDateOrUndefined,onSelect,numberOfMonths,disabled:disabledCalendarDays,returnFocusRef:"from"===inputMode?fromTriggerRef:toTriggerRef,yearRange})})):null]})})},useDateRangePickerIds=function useDateRangePickerIds(idProp){var autoId=(0,_core__WEBPACK_IMPORTED_MODULE_3__.Me)(idProp);return{fieldsetId:idProp||"date-range-picker-".concat(autoId),hintId:"date-range-picker-".concat(autoId,"-hint"),messageId:"date-range-picker-".concat(autoId,"-message")}};try{DateRangePicker.displayName="DateRangePicker",DateRangePicker.__docgenInfo={description:"",displayName:"DateRangePicker",props:{minDate:{defaultValue:null,description:"If set, any days before this date will not be selectable.",name:"minDate",required:!1,type:{name:"Date"}},maxDate:{defaultValue:null,description:"If set, any days after this date will not be selectable.",name:"maxDate",required:!1,type:{name:"Date"}},legend:{defaultValue:null,description:"Describes the purpose of the group of fields.",name:"legend",required:!1,type:{name:"string"}},hint:{defaultValue:null,description:"Provides extra information about the group of fields.",name:"hint",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"Defines an identifier (ID) which must be unique.",name:"id",required:!1,type:{name:"string"}},message:{defaultValue:null,description:"Message to show when the field is invalid.",name:"message",required:!1,type:{name:"string"}},fromInvalid:{defaultValue:{value:"false"},description:"If true, the invalid state will be rendered for the from date field.",name:"fromInvalid",required:!1,type:{name:"boolean"}},toInvalid:{defaultValue:{value:"false"},description:"If true, the invalid state will be rendered for the start date field.",name:"toInvalid",required:!1,type:{name:"boolean"}},hideOptionalLabel:{defaultValue:null,description:'If true, "(optional)" will never be appended to the legend even when `required` is `false`.',name:"hideOptionalLabel",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"TODO",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:'TODO If false, "(optional)" will be appended to the label.',name:"required",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"The value of the field.",name:"value",required:!0,type:{name:"DateRangeWithString"}},onChange:{defaultValue:null,description:"Function to be fired following a change event.",name:"onChange",required:!0,type:{name:"(day: DateRange) => void"}},onFromInputChange:{defaultValue:null,description:"Function to be fired when the input value is updated.",name:"onFromInputChange",required:!1,type:{name:"((inputValue: string) => void)"}},onToInputChange:{defaultValue:null,description:"Function to be fired when the input value is updated.",name:"onToInputChange",required:!1,type:{name:"((inputValue: string) => void)"}},fromLabel:{defaultValue:{value:"Start date"},description:"The label above the start date field",name:"fromLabel",required:!1,type:{name:"string"}},toLabel:{defaultValue:{value:"End date"},description:"The label above the end date field",name:"toLabel",required:!1,type:{name:"string"}},fromInputRef:{defaultValue:null,description:"Ref to the start input element.",name:"fromInputRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},toInputRef:{defaultValue:null,description:"Ref to the end input element.",name:"toInputRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},yearRange:{defaultValue:null,description:"The range of options to display in calendar year select.",name:"yearRange",required:!1,type:{name:"{ from: number; to: number; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/react/src/date-picker/DateRangePicker.tsx#DateRangePicker"]={docgenInfo:DateRangePicker.__docgenInfo,name:"DateRangePicker",path:"packages/react/src/date-picker/DateRangePicker.tsx#DateRangePicker"})}catch(__react_docgen_typescript_loader_error){}try{useDateRangePickerIds.displayName="useDateRangePickerIds",useDateRangePickerIds.__docgenInfo={description:"",displayName:"useDateRangePickerIds",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/react/src/date-picker/DateRangePicker.tsx#useDateRangePickerIds"]={docgenInfo:useDateRangePickerIds.__docgenInfo,name:"useDateRangePickerIds",path:"packages/react/src/date-picker/DateRangePicker.tsx#useDateRangePickerIds"})}catch(__react_docgen_typescript_loader_error){}}}]);