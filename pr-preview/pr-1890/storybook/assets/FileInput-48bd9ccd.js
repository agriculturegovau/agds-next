import{j as a,a as B,F as z}from"./responsive-123a9343.js";import{r as n}from"./index-3b9dd0eb.js";import{v as D}from"./ExternalLinkCallout-dac509ef.js";import{B as H}from"./Button-12960031.js";import"./ButtonGroup-399a126c.js";import{F as W}from"./Field-b78d080b.js";import{f as _}from"./utils-a6902619.js";import{S as q}from"./Stack-938d29d6.js";import{T as C}from"./Text-ade3e1ab.js";const N=n.forwardRef(function({accept:t,autoFocus:u,buttonSize:x="sm",label:d,hideOptionalLabel:S,required:m,hint:k,message:I,multiple:b,invalid:F,id:j,disabled:y,onChange:l,...s},R){const $=n.useRef(null),o=R||$,g=n.useRef(null),[f,v]=n.useState([]),A=n.useCallback(e=>{l==null||l(e),e.target.files&&v(Array.from(e.target.files).map(i=>i.name))},[l]),M=()=>{var e;"current"in o&&((e=o.current)==null||e.click())},T=e=>{s.onBlur&&"current"in o&&s.onBlur(e)},V=e=>{s.onFocus&&"current"in o&&s.onFocus(e)};n.useEffect(()=>{var e;u&&((e=g.current)==null||e.focus())},[]);const E=n.useMemo(()=>Array.isArray(t)?Array.from(new Set(t.flatMap(e=>{const i=_[e];return i?O(i)?i.label:i.extensions:e}))).join(", "):t,[t]),L=k||t&&`Files accepted: ${E}`,c=b?"files":"file",h=`Select ${c}`,w=[h,d,m&&"required",F&&"invalid",p({fileNames:f,fileOrFiles:c})].filter(Boolean).join(", ");return a(W,{hideOptionalLabel:S,hint:L,id:j,invalid:F,label:d,message:I,required:m,children:e=>B(z,{children:[B(q,{alignItems:"start",gap:.5,justifyContent:"flex-start",children:[a(H,{"aria-describedby":e["aria-describedby"],"aria-label":w,disabled:y,id:e.id,onBlur:T,onClick:M,onFocus:V,ref:g,size:x,variant:"secondary",children:h}),a(C,{breakWords:!0,color:"muted",...f.length&&{color:void 0,fontWeight:"bold"},children:p({fileNames:f,fileOrFiles:c,isDisplayed:!0})})]}),a("input",{...s,accept:t==null?void 0:t.toString(),"aria-hidden":!0,css:D,disabled:y,multiple:b,onChange:A,ref:o,tabIndex:-1,type:"file"})]})})}),O=r=>"label"in r,p=({fileNames:r,fileOrFiles:t,isDisplayed:u})=>r.length===0?`No ${t} selected`:r.length===1?`${r[0]}${u?"":" selected"}`:`${r.length} files selected`;N.__docgenInfo={description:"",methods:[],displayName:"FileInput",props:{buttonSize:{defaultValue:{value:"'sm'",computed:!1},required:!1}}};export{N as F};
