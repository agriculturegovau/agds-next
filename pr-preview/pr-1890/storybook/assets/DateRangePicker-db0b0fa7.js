import{j as u,a as P,c as De,t as Re}from"./responsive-22d1c539.js";import{r as a}from"./index-f0f3a68d.js";import{S as Ve,F as Fe}from"./Stack-e6a92433.js";import{B as Ce}from"./Box-cc8e6f8e.js";import{u as Se}from"./useId-bf1c3739.js";import{u as Be}from"./useTernaryState-ed86673f.js";import{u as Le}from"./useWindowSize-26bd49d7.js";import{u as Ee}from"./useClickOutside-ca5d6845.js";import{b as je,c as xe,d as He,a as Pe}from"./Field-d96b22a3.js";import{v as $e}from"./ExternalLinkCallout-896682bb.js";import{u as Ne,P as ee}from"./Popover-4e65a303.js";import{k as We,l as _e,m as ze,o as Ke,q as Ge,a as te,n as ne,b as re,t as k,c as ae,d as Je,j as oe,p as se,e as ie}from"./Calendar-82a8aa21.js";import{D as de}from"./DatePickerInput-77442637.js";import{r as Qe}from"./index-67ce947c.js";function Xe(o,e){Qe(2,arguments);var n=_e(e);return We(o,-n)}function $(o){const{to:e,from:n}=o;return n&&e&&ze(e,n)?{from:e,to:n}:o}function Ye(o,e,n,w){const l=(()=>{if(o==="from"&&e.from)return e.from;if(o==="to"&&e.to)return e.to;if(n){const f=new Date(n.from,0,1),m=new Date(n.to,11,31);return Ke(new Date,[f,m])}})();return l&&o==="to"&&w===2?(()=>e!=null&&e.from&&(e!=null&&e.to)?Ge(e.to,e.from):-1)()===0?l:Xe(l,1):l}const Ze=({allowedDateFormats:o=te,legend:e,hint:n,id:w,fromInvalid:l=!1,toInvalid:f=!1,message:m,hideOptionalLabel:D,value:i,onChange:T,onFromInputChange:R,onToInputChange:V,disabled:N,fromLabel:ue="Start date",toLabel:le="End date",required:F=!1,minDate:b,maxDate:M,fromInputRef:fe,toInputRef:me,yearRange:W,dateFormat:d="dd/MM/yyyy"})=>{const v=a.useMemo(()=>Array.from(new Set([d,...o.filter(r=>te.includes(r))])),[d,o]),[ce,_]=a.useState(!1),[y,pe,g]=Be(!1),z=y?g:pe,[c,h]=a.useState(),C=a.useRef(null),S=a.useRef(null);function ye(){h("from"),z(),_(!0)}function ge(){h("to"),z(),_(!0)}const q=Ne(),p=a.useMemo(()=>({from:typeof i.from=="string"?ne(i.from):i.from,to:typeof i.to=="string"?ne(i.to):i.to}),[i]),K=a.useCallback((r,t,I)=>{if(!c||I.disabled)return;const s=$(c==="from"?{from:t,to:p.to}:{from:p.from,to:t});if(T(s),B(s.from?re(s.from,d):""),L(s.to?re(s.to,d):""),s.from&&s.to){g(),h(void 0);return}if(c==="from"){h("to");return}if(c==="to"&&!s.from){h("from");return}},[g,c,T,p,d]),[G,B]=a.useState(k(i.from,d)),be=r=>{const t=r.target.value,I=se(t,v),s=ie(I,b,M),H=$({from:s,to:p.to});!t||s?T(H):R==null||R(t)},Me=r=>{const t=r.target.value;B(t)},[J,L]=a.useState(k(i.to,d)),he=r=>{const t=r.target.value,I=se(t,v),s=ie(I,b,M),H=$({from:p.from,to:s});!t||s?T(H):V==null||V(t)},we=r=>{const t=r.target.value;L(t)};a.useEffect(()=>{B(k(i.from,d)),L(k(i.to,d))},[i,d]);const Ie=a.useCallback(()=>{y&&g()},[y,g]);Ee([q.popoverRef,C,S],Ie),a.useEffect(()=>{const r=t=>{y&&t.code==="Escape"&&(t.preventDefault(),t.stopPropagation(),g(),h(void 0))};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[y,g]);const Q=a.useMemo(()=>{if(b||M)return[b?{before:b}:void 0,M?{after:M}:void 0].filter(r=>!!r)},[b,M]),{windowWidth:Te=0}=Le(),E=Te>Re.breakpoint.md?2:1,X=l||f,{fieldsetId:ve,fromId:qe,hintId:j,messageId:x,toId:ke}=Oe(w),Y=[l&&m?x:null,n?j:null].filter(Boolean).join(" "),Z=[f&&m?x:null,n?j:null].filter(Boolean).join(" "),O=Ye(c,p,W,E),A=a.useMemo(()=>q.getPopoverProps(),[q]),U=a.useMemo(()=>({defaultMonth:O,disabled:Q,initialFocus:!0,numberOfMonths:E,onSelect:K,returnFocusRef:c==="from"?C:S,selected:p}),[O,Q,c,E,K,p]);return u(Pe,{invalid:X,id:ve,children:P(Ce,{as:"fieldset",children:[u(je,{as:"legend",required:F,hideOptionalLabel:D,css:e?void 0:$e,children:e??"Date range"}),P(Ve,{gap:.5,css:{marginTop:e?De(.5):void 0},children:[n?u(xe,{id:j,children:n}):null,m&&X?u(He,{id:x,children:m}):null,P(Fe,{...q.getReferenceProps(),flexWrap:"wrap",inline:!0,gap:1,children:[u(de,{"aria-describedby":Y.length>0?Y:null,ref:fe,label:ue,hideOptionalLabel:D||!!e,value:G,onBlur:be,onChange:Me,buttonRef:C,buttonOnClick:ye,buttonAriaLabel:ae({allowedDateFormats:v,rangeName:"start",value:G}),disabled:N,required:F,invalid:{field:!1,input:l},dateFormat:d,id:qe}),u(de,{"aria-describedby":Z.length>0?Z:null,ref:me,label:le,hideOptionalLabel:D||!!e,value:J,onBlur:he,onChange:we,buttonRef:S,buttonOnClick:ge,buttonAriaLabel:ae({allowedDateFormats:v,rangeName:"end",value:J}),disabled:N,required:F,invalid:{field:!1,input:f},dateFormat:d,id:ke})]})]}),u(Je,{yearRange:W,children:ce?y&&u(ee,{...A,children:u(oe,{...U})}):u(ee,{...A,children:y&&u(oe,{...U,css:{minHeight:"200px"}})})})]})})};function Oe(o){const e=Se(o),n=o||`date-range-picker-${e}`,w=`date-range-picker-${e}-hint`,l=`date-range-picker-${e}-message`,f=`date-range-picker-${e}-from`,m=`date-range-picker-${e}-to`;return{fieldsetId:n,fromId:f,hintId:w,messageId:l,toId:m}}Ze.__docgenInfo={description:"",methods:[],displayName:"DateRangePicker",props:{minDate:{required:!1,tsType:{name:"Date"},description:"If set, any days before this date will not be selectable."},maxDate:{required:!1,tsType:{name:"Date"},description:"If set, any days after this date will not be selectable."},allowedDateFormats:{required:!1,tsType:{name:"ReadonlyArray",elements:[{name:"unknown[number]",raw:"(typeof acceptedDateFormats)[number]"}],raw:"ReadonlyArray<AcceptedDateFormats>"},description:"Specifies the date formats that can be parsed.",defaultValue:{value:`[
	'dd/MM/yyyy', // e.g. 18/02/2023
	'dd-MM-yyyy', // e.g. 18-02-2023
	'dd MM yyyy', // e.g. 18 02 2023
	'MM/dd/yyyy', // e.g. 02/18/2023
	'MM-dd-yyyy', // e.g. 02-18-2023
	'MM dd yyyy', // e.g. 02 18 2023
	'do MMMM yyyy', // e.g. 8th February 2023
	'do MMM yyyy', // e.g. 8th Feb 2023
	'MMMM do yyyy', // e.g. February 8th 2023
	'MMM do yyyy', // e.g. Feb 8th 2023
	'd MMMM yyyy', // e.g. 8 February 2023
	'd MMM yyyy', // e.g. 8 Feb 2023
	'MMMM d yyyy', // e.g. February 8 2023
	'MMM d yyyy', // e.g. Feb 8 2023
	'dd MMMM yyyy', // e.g. 08 February 2023
	'dd MMM yyyy', // e.g. 08 Feb 2023
	'MMMM dd yyyy', // e.g. February 08 2023
	'MMM dd yyyy', // e.g. Feb 08 2023
]`,computed:!1}},legend:{required:!1,tsType:{name:"string"},description:"Describes the purpose of the group of fields."},hint:{required:!1,tsType:{name:"string"},description:"Provides extra information about the group of fields."},id:{required:!1,tsType:{name:"string"},description:"Defines an identifier (ID) which must be unique."},message:{required:!1,tsType:{name:"string"},description:"Message to show when the field is invalid."},fromInvalid:{required:!1,tsType:{name:"boolean"},description:"If true, the invalid state will be rendered for the start date.",defaultValue:{value:"false",computed:!1}},toInvalid:{required:!1,tsType:{name:"boolean"},description:"If true, the invalid state will be rendered for the end date.",defaultValue:{value:"false",computed:!1}},hideOptionalLabel:{required:!1,tsType:{name:"boolean"},description:'If true, "(optional)" will never be appended to the legend even when `required` is `false`.'},disabled:{required:!1,tsType:{name:"boolean"},description:"If true, the field will not be interactive."},required:{required:!1,tsType:{name:"boolean"},description:'If false, "(optional)" will not be appended to the legend.',defaultValue:{value:"false",computed:!1}},value:{required:!0,tsType:{name:"signature",type:"object",raw:`{
	from: Date | string | undefined;
	to: Date | string | undefined;
}`,signature:{properties:[{key:"from",value:{name:"union",raw:"Date | string | undefined",elements:[{name:"Date"},{name:"string"},{name:"undefined"}],required:!0}},{key:"to",value:{name:"union",raw:"Date | string | undefined",elements:[{name:"Date"},{name:"string"},{name:"undefined"}],required:!0}}]}},description:"The value of the field."},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(day: DateRange) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
	from: Date | undefined;
	to: Date | undefined;
}`,signature:{properties:[{key:"from",value:{name:"union",raw:"Date | undefined",elements:[{name:"Date"},{name:"undefined"}],required:!0}},{key:"to",value:{name:"union",raw:"Date | undefined",elements:[{name:"Date"},{name:"undefined"}],required:!0}}]}},name:"day"}],return:{name:"void"}}},description:"Function to be fired following a change event."},onFromInputChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(inputValue: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"inputValue"}],return:{name:"void"}}},description:"Function to be fired when the input value is updated."},onToInputChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(inputValue: string | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"string | undefined",elements:[{name:"string"},{name:"undefined"}]},name:"inputValue"}],return:{name:"void"}}},description:"Function to be fired when the input value is updated."},fromLabel:{required:!1,tsType:{name:"string"},description:"The label above the start date.",defaultValue:{value:"'Start date'",computed:!1}},toLabel:{required:!1,tsType:{name:"string"},description:"The label above the end date.",defaultValue:{value:"'End date'",computed:!1}},fromInputRef:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:"Ref to the start input element."},toInputRef:{required:!1,tsType:{name:"Ref",elements:[{name:"HTMLInputElement"}],raw:"Ref<HTMLInputElement>"},description:"Ref to the end input element."},yearRange:{required:!1,tsType:{name:"signature",type:"object",raw:"{ from: number; to: number }",signature:{properties:[{key:"from",value:{name:"number",required:!0}},{key:"to",value:{name:"number",required:!0}}]}},description:"The range of options to display in calendar year select."},dateFormat:{required:!1,tsType:{name:"unknown[number]",raw:"(typeof acceptedDateFormats)[number]"},description:"Used to adjust the date format displayed in the text input and secondary label.",defaultValue:{value:"'dd/MM/yyyy'",computed:!1}}}};export{Ze as D,Oe as u};
