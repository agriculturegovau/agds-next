import{j as a,a as S,F as z}from"./responsive-22d1c539.js";import{r}from"./index-f0f3a68d.js";import{v as D}from"./ExternalLinkCallout-896682bb.js";import{B as H}from"./Button-1a082b6d.js";import"./ButtonGroup-5c583b5f.js";import{u as _,F as C}from"./Field-ef82e19c.js";import{f as N}from"./utils-a6902619.js";import{S as O}from"./Stack-e6a92433.js";import{T as q}from"./Text-03708b2d.js";const G=r.forwardRef(function({accept:t,autoFocus:u,buttonSize:x="sm",label:m,hideOptionalLabel:b,required:f,hint:k,message:I,multiple:F,invalid:y,id:j,disabled:g,onChange:l,...i},R){const $=r.useRef(null),o=R||$,h=r.useRef(null),[c,v]=r.useState([]),A=r.useCallback(e=>{l==null||l(e),e.target.files&&v(Array.from(e.target.files).map(s=>s.name))},[l]),L=()=>{var e;"current"in o&&((e=o.current)==null||e.click())},M=e=>{i.onBlur&&"current"in o&&i.onBlur(e)},T=e=>{i.onFocus&&"current"in o&&i.onFocus(e)};r.useEffect(()=>{var e;u&&((e=h.current)==null||e.focus())},[]);const V=r.useMemo(()=>Array.isArray(t)?Array.from(new Set(t.flatMap(e=>{const s=N[e];return s?J(s)?s.label:s.extensions:e}))).join(", "):t,[t]),E=k||t&&`Files accepted: ${V}`,W=_({hideOptionalLabel:b,required:f}),d=F?"files":"file",B=`Select ${d}`,w=[B,m,W,f&&"required",y&&"invalid",p({fileNames:c,fileOrFiles:d})].filter(Boolean).join(", ");return a(C,{hideOptionalLabel:b,hint:E,id:j,invalid:y,label:m,message:I,required:f,children:e=>S(z,{children:[S(O,{alignItems:"start",gap:.5,justifyContent:"flex-start",children:[a(H,{"aria-describedby":e["aria-describedby"],"aria-label":w,disabled:g,id:e.id,onBlur:M,onClick:L,onFocus:T,ref:h,size:x,variant:"secondary",children:B}),a(q,{breakWords:!0,color:"muted",...c.length&&{color:void 0,fontWeight:"bold"},children:p({fileNames:c,fileOrFiles:d,isDisplayed:!0})})]}),a("input",{...i,accept:t==null?void 0:t.toString(),"aria-hidden":!0,css:D,disabled:g,multiple:F,onChange:A,ref:o,tabIndex:-1,type:"file"})]})})}),J=n=>"label"in n,p=({fileNames:n,fileOrFiles:t,isDisplayed:u})=>n.length===0?`No ${t} selected`:n.length===1?`${n[0]}${u?"":" selected"}`:`${n.length} files selected`;G.__docgenInfo={description:"",methods:[],displayName:"FileInput",props:{buttonSize:{defaultValue:{value:"'sm'",computed:!1},required:!1}}};export{G as F};
