(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1430],{83637:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return B}});var r=n(27378),o=n(74578),i=n(54803),l=n(40670),a=n(91689),c=n(55732),s=n(90849),u=n(57135),d=n.n(u),f=n(86677),p=n(54389),v=n(13635),m=n(38163),h=n(50456),k=n(68944),b=n(68713),y=n(4401),g=n(2951),O=n(10957),Z=n(97532),w=n(96897),C=n(50853),S=n(87800);function P(e){var t=e.formTitle,n=e.formIntroduction,o=e.formCallToAction,i=e.children,l=e.hideRequiredFieldsMessage,a=(0,b.t)(),c=a.startTask,s=a.checkIsTaskAvailable,u=(0,C.g8)().backHref,d=s("task3");return(0,r.useEffect)(function(){c("task3")},[c]),(0,S.tZ)(g.Columns,{children:(0,S.tZ)(g.Column,{columnSpan:{xs:12,md:8},children:(0,S.BX)(h.Stack,{gap:3,alignItems:"flex-start",children:[(0,S.tZ)(O.DirectionLink,{direction:"left",href:u,children:"Back"}),(0,S.tZ)(Z.Y,{task:3,title:t,introduction:n,callToAction:o,hideRequiredFieldsMessage:l,children:d?i:(0,S.tZ)(w.nc,{})})]})})})}var j=n(1085),_=n(86101);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(){var e,t,n=(0,f.useRouter)().query,o=(0,C.g8)().submitStep,i=(0,b.t)(),l=i.formState,a=i.setFormState,u=i.isSavingBeforeExiting,g=(0,r.useState)("true"===n.success),O=g[0],Z=g[1],w=(0,r.useState)(),E=w[0],x=w[1],F=(0,r.useState)(),B=F[0],D=F[1],N=(null===(t=l.task3)||void 0===t||null===(t=t.step1)||void 0===t?void 0:t.fileCollection)||{};function X(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return j.Or.safeParse(null==t||null===(e=t.task3)||void 0===e?void 0:e.step1)}var A=(e=(0,c.Z)(d().mark(function e(t){var n,r;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=X(),t.preventDefault(),!(!u&&!r.success)){e.next=5;break}return x(r.error.format()),e.abrupt("return");case 5:if(e.t0=!u,!e.t0){e.next=9;break}return e.next=9,o();case 9:a(T(T({},l),{},{task3:T(T({},l.task3),{},{step1:T(T({},null===(n=l.task3)||void 0===n?void 0:n.step1),{},{fileCollection:N,completed:!u,started:!0}),completed:!u,started:!0})}));case 10:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)});return(0,S.tZ)(P,{formTitle:C.jC[0].label,formIntroduction:"Upload all documents listed in the table below.",children:(0,S.BX)(h.Stack,{as:"form",gap:2,width:"100%",onSubmit:A,children:[O&&B&&(0,S.tZ)(m.PageAlert,{tone:"success",title:"".concat(null==B?void 0:B.type," has been added"),onClose:function(){Z(!1),D(void 0)},children:(0,S.BX)(k.Text,{children:[null==B?void 0:B.file.name," has been added."]})}),(0,S.tZ)(p.Callout,{tone:"info",title:"Based on your answers, you must provide a Food Safety Supervisor Certificate for Charlie Walker.",variant:"compact"}),(0,S.tZ)(_._,{fileCollection:N,onFileUpload:function(e,t){if(t){var n,r,o={file:e,code:t,type:(null===(n=N[t])||void 0===n?void 0:n.type)||"unknown",fileName:e.name,fileSize:(0,v.formatFileSize)(e.size)};D(o);var i=T(T({},l),{},{task3:T(T({},l.task3),{},{step1:T(T({},null===(r=l.task3)||void 0===r?void 0:r.step1),{},{fileCollection:T(T({},N),{},(0,s.Z)({},t,o)),completed:!u,started:!0}),started:!0})});a(i),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=X(e);x(t.success?void 0:t.error.format())}(i)}},onFileDelete:function(e){var t;e&&a(T(T({},l),{},{task3:T(T({},l.task3),{},{step1:T(T({},null===(t=l.task3)||void 0===t?void 0:t.step1),{},{fileCollection:T(T({},N),{},(0,s.Z)({},e,{type:N[e].type,code:e})),completed:!1})})}))},errors:E}),(0,S.tZ)(y.r,{})]})})}var F=function(){return(0,S.BX)(r.Fragment,{children:[(0,S.tZ)(l.$,{title:C.jC[0].label}),(0,S.tZ)(o.PageContent,{children:(0,S.tZ)(x,{})})]})},B=F;F.getLayout=function(e){return(0,S.tZ)(i.L,{focusMode:!0,children:(0,S.tZ)(a.iP,{children:(0,S.tZ)(C.Or,{children:e})})})}},54964:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/licences-and-permits/apply/mobile-food-vendor-permit/form/task-3/step-1",function(){return n(83637)}])}},function(e){e.O(0,[7454,9998,3662,1178,2287,3635,8486,5717,5265,2230,1610,9486,4373,4067,4803,1689,9774,2888,179],function(){return e(e.s=54964)}),_N_E=e.O()}]);