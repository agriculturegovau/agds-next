(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1430],{83637:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return D}});var r=n(27378),o=n(74578),i=n(54803),l=n(40670),a=n(91689),c=n(55732),s=n(90849),u=n(57135),d=n.n(u),f=n(86677),p=n(54389),v=n(13635),m=n(38163),h=n(50456),k=n(68944),b=n(2604),y=n(4401),Z=n(2951),O=n(10957),g=n(97532),C=n(96897),w=n(50853),S=n(87800);function P(e){var t=e.formTitle,n=e.formIntroduction,o=e.formCallToAction,i=e.children,l=(0,b.t)(),a=l.startTask,c=l.checkIsTaskAvailable,s=(0,w.g8)().backHref,u=c("task3");return(0,r.useEffect)(function(){a("task3")},[a]),(0,S.tZ)(Z.Columns,{children:(0,S.tZ)(Z.Column,{columnSpan:{xs:12,md:8},children:(0,S.BX)(h.Stack,{gap:3,alignItems:"flex-start",children:[(0,S.tZ)(O.DirectionLink,{direction:"left",href:s,children:"Back"}),(0,S.tZ)(g.Y,{task:3,title:t,introduction:n,callToAction:o,children:u?i:(0,S.tZ)(C.nc,{})})]})})})}var _=n(1085),j=n(86101);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach(function(t){(0,s.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(){var e,t,n,o,i=(0,f.useRouter)().query,l=(0,w.g8)().submitStep,a=(0,b.t)(),u=a.formState,Z=a.setFormState,O=a.isSavingBeforeExiting,g=(0,r.useState)("true"===i.success),C=g[0],T=g[1],E=(0,r.useState)(),B=E[0],D=E[1],F=(0,r.useState)(),N=F[0],X=F[1],A=(null===(t=u.task3)||void 0===t||null===(t=t.step1)||void 0===t?void 0:t.fileCollection)||{},I=(e=(0,c.Z)(d().mark(function e(t){var n,r,o;return d().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=_.Or.safeParse(null===(n=u.task3)||void 0===n?void 0:n.step1),t.preventDefault(),!(!O&&!o.success)){e.next=5;break}return D(o.error.format()),e.abrupt("return");case 5:if(e.t0=!O,!e.t0){e.next=9;break}return e.next=9,l();case 9:Z(x(x({},u),{},{task3:x(x({},u.task3),{},{step1:x(x({},null===(r=u.task3)||void 0===r?void 0:r.step1),{},{fileCollection:A,completed:!O,started:!0}),completed:!O,started:!0})}));case 10:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)});return(0,S.tZ)(P,{formTitle:w.jC[0].label,formIntroduction:"Upload all documents listed in the table below.",children:(0,S.BX)(h.Stack,{as:"form",gap:2,width:"100%",onSubmit:I,children:[(null==B||null===(n=B.fileCollection)||void 0===n?void 0:n._errors)&&(0,S.tZ)(m.PageAlert,{tone:"error",title:null===(o=B.fileCollection)||void 0===o?void 0:o._errors[0],children:(0,S.tZ)(k.Text,{children:"Files need to be uploaded."})}),C&&N&&(0,S.tZ)(m.PageAlert,{tone:"success",title:"".concat(null==N?void 0:N.type," has been added"),onClose:function(){T(!1),X(void 0)},children:(0,S.BX)(k.Text,{children:[null==N?void 0:N.file.name," has been added."]})}),(0,S.tZ)(p.Callout,{tone:"info",title:"Based on your answers, you must provide a Food Safety Supervisor Certificate for Charlie Walker.",variant:"compact"}),(0,S.tZ)(j._,{fileCollection:A,onFileUpload:function(e,t){if(t){var n,r,o={file:e,code:t,type:(null===(n=A[t])||void 0===n?void 0:n.type)||"unknown",fileName:e.name,fileSize:(0,v.formatFileSize)(e.size)};X(o),Z(x(x({},u),{},{task3:x(x({},u.task3),{},{step1:x(x({},null===(r=u.task3)||void 0===r?void 0:r.step1),{},{fileCollection:x(x({},A),{},(0,s.Z)({},t,o)),completed:!O,started:!0}),started:!0})}))}},onFileDelete:function(e){var t;e&&Z(x(x({},u),{},{task3:x(x({},u.task3),{},{step1:x(x({},null===(t=u.task3)||void 0===t?void 0:t.step1),{},{fileCollection:x(x({},A),{},(0,s.Z)({},e,{type:A[e].type,code:e})),completed:!1})})}))}}),(0,S.tZ)(y.r,{})]})})}var B=function(){return(0,S.BX)(r.Fragment,{children:[(0,S.tZ)(l.$,{title:w.jC[0].label}),(0,S.tZ)(o.PageContent,{children:(0,S.tZ)(E,{})})]})},D=B;B.getLayout=function(e){return(0,S.tZ)(i.L,{focusMode:!0,children:(0,S.tZ)(a.iP,{children:(0,S.tZ)(w.Or,{children:e})})})}},54964:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/licences-and-permits/apply/mobile-food-vendor-permit/form/task-3/step-1",function(){return n(83637)}])}},function(e){e.O(0,[8629,9998,3662,2552,7855,3635,8486,5717,5265,1610,2924,7931,4373,4067,4803,1689,9774,2888,179],function(){return e(e.s=54964)}),_N_E=e.O()}]);