(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8028],{51036:function(e,t,n){"use strict";var r=n(51502).___internalHook("/","../../../..","../..");e.exports=n(11475),r()},47586:function(e,t,n){"use strict";var r=n(51502).___internalHook("/","../../../..","../..");e.exports=n(45569),r()},60954:function(e,t,n){"use strict";n.d(t,{gN:function(){return g},i$:function(){return c},J1:function(){return m},Qy:function(){return s},nd:function(){return v},useScrollToField:function(){return Z}});var r=n(10043),i=n(8447),o=n(7226),a=n(87800),c=function(e){var t=e.children,n=e.invalid,c=e.id;return(0,a.tZ)(o.Stack,{gap:.5,paddingLeft:n?1:void 0,borderLeft:n,borderLeftWidth:"xl",id:c,css:(0,r.iv)({borderLeftColor:n?i._X.systemError:void 0},"",""),children:t})},l=n(27378),d=n(84815),u=n(89205),s=function(e){var t=e.as,n=e.children,r=e.className,i=e.id,o=e.htmlFor,c=e.required,s=e.secondaryLabel,m=e.hideOptionalLabel,f=(0,l.useMemo)(function(){return[s,m||c?null:"(optional)"].filter(Boolean).join(" ")},[c,s,m]);return(0,a.BX)(d.Box,{as:void 0===t?"label":t,id:i,htmlFor:o,className:r,children:[(0,a.tZ)(u.Text,{as:"span",fontWeight:"bold",children:n}),f?(0,a.BX)(u.Text,{as:"span",color:"muted",children:[" ",f]}):null]})},m=function(e){var t=e.children,n=e.id;return(0,a.tZ)(u.Text,{display:"block",color:"muted",id:n,children:t})},f=n(84007),h=n(32084),p={name:"4zleql",styles:"display:block"},v=function(e){var t=e.children,n=e.id;return(0,a.BX)(f.Flex,{gap:.5,alignItems:"center",children:[(0,a.tZ)(d.Box,{flexShrink:0,children:(0,a.tZ)(h.AlertFilledIcon,{color:"error",size:"md","aria-label":"Error","aria-hidden":"false",css:p})}),(0,a.tZ)(u.Text,{display:"block",fontWeight:"bold",color:"error",id:n,children:t})]})},g=function(e){var t=e.children,n=e.hint,o=e.id,l=e.invalid,d=e.label,u=e.labelId,f=e.maxWidth,h=e.secondaryLabel,p=e.hideOptionalLabel,g=e.message,Z=e.required,S=b(o),I=S.fieldId,B=S.hintId,x=S.messageId,k=y({required:Z,fieldId:I,message:g,messageId:x,hint:n,hintId:B,invalid:l});return(0,a.BX)(c,{invalid:l,children:[(0,a.tZ)(s,{id:u,htmlFor:I,secondaryLabel:h,hideOptionalLabel:p,required:Z,children:d}),n?(0,a.tZ)(m,{id:B,children:n}):null,g&&l?(0,a.tZ)(v,{id:x,children:g}):null,"function"==typeof t?t(k):t,f?(0,a.tZ)("div",{"aria-hidden":!0,css:(0,r.iv)({height:0,marginTop:"-".concat((0,i.mapSpacing)(.5)),maxWidth:i.tokens.maxWidth.field[f],overflow:"hidden","::after":{content:'"---------------------------------------------------------------"'}},"","")}):null]})},b=function(e){var t=(0,i.Me)(e);return{fieldId:e||"field-".concat(t),hintId:"field-".concat(t,"-hint"),messageId:"field-".concat(t,"-message")}},y=function(e){var t=e.required,n=e.fieldId,r=e.message,i=e.messageId,o=e.hint,a=e.hintId,c=e.invalid,l=[r?i:null,o?a:null].filter(Boolean);return{"aria-required":!!t,"aria-invalid":!!c,"aria-describedby":l.length?l.join(" "):void 0,id:n}};function Z(){return(0,l.useCallback)(function(e){var t=function(e){if("string"==typeof e)return e;var t=e.target;if(t instanceof HTMLAnchorElement)return t.hash.substring(1)}(e);if(t){var n,r,i,o=document.getElementById(t)||document.getElementsByName(t)[0];o&&(i=null==(r=document.querySelector("label[for='"+t+"']"))?void 0:r.parentElement,"div"===o.tagName.toLowerCase()?null===(n=o.querySelector("input"))||void 0===n||n.focus():o.focus(),i?i.scrollIntoView():o.scrollIntoView(),"string"!=typeof e&&e.preventDefault())}},[])}},87312:function(e,t,n){"use strict";n.d(t,{SummaryList:function(){return c},SummaryListItem:function(){return l},SummaryListItemDescription:function(){return a},SummaryListItemTerm:function(){return o}});var r=n(84007),i=n(87800);function o(e){var t=e.children;return(0,i.tZ)(r.Flex,{as:"dt",fontWeight:"bold",width:["100%","30%"],flexShrink:0,minWidth:"200px",fontSize:"sm",color:"text",children:t})}function a(e){var t=e.children;return(0,i.tZ)(r.Flex,{as:"dd",flexGrow:1,fontSize:"sm",color:"text",children:t})}function c(e){var t=e.children;return(0,i.tZ)(r.Flex,{as:"dl",width:"100%",borderTop:!0,borderColor:"muted",flexDirection:"column",children:t})}function l(e){var t=e.children;return(0,i.tZ)(r.Flex,{borderBottom:!0,borderColor:"muted",flexDirection:["column","row"],gap:.5,paddingY:.75,children:t})}},20329:function(e,t,n){"use strict";var r=n(51502).___internalHook("/","../../../..","../..");e.exports=n(87312),r()},79706:function(e,t,n){"use strict";var r=n(51502).___internalHook("/","../../../..","../..");e.exports=n(7971),r()},39402:function(e,t,n){"use strict";n.d(t,{z:function(){return o}});var r=n(68944),i=n(87800),o=function(){return(0,i.tZ)(r.Text,{as:"p",fontSize:"xs",color:"muted",children:"All fields are required unless marked optional."})}},72207:function(e,t,n){"use strict";n.d(t,{E:function(){return d}});var r=n(27378),i=n(11475),o=n(89205),a=n(85875),c=n(28501),l=n(87800);function d(e){var t=e.isOpen,n=e.itemsToDelete,d=e.onClose,u=e.onConfirm,s=e.pageAlertElement,m=(0,r.useState)(!1),f=m[0],h=m[1],p=(0,r.useMemo)(function(){return Array.isArray(n)?{title:"Are you sure you want to remove access for ".concat(n.length," staff ").concat((0,c.Ho)(n.length,"member","members"),"?"),description:"Access will be removed immediately. You can not undo this action."}:{title:"Are you sure you want to remove access for ".concat(n.name,"?"),description:"Access will be removed immediately. You can not undo this action."}},[n]),v=p.title,g=p.description;return(0,l.tZ)(a.Modal,{elementToFocusOnClose:s,isOpen:t,onClose:d,title:v,actions:(0,l.BX)(i.ButtonGroup,{children:[(0,l.tZ)(i.Button,{loading:f,onClick:function(){h(!0),setTimeout(function(){h(!1),u()},1500)},children:"Remove access"}),(0,l.tZ)(i.Button,{variant:"secondary",onClick:d,children:"Cancel"})]}),children:(0,l.tZ)(o.Text,{as:"p",children:g})})}},28501:function(e,t,n){"use strict";n.d(t,{Ho:function(){return o},KD:function(){return r},UO:function(){return i}});var r=function(e){var t=e.loading,n=e.totalItems,r=e.pagination;if(t)return"Staff members";var i=1===n?"1 item":"".concat(n," items"),o=(r.page-1)*r.perPage+1,a=(r.page-1)*r.perPage+r.perPage;return a>n?"Staff members (".concat(i,")"):"Staff members (".concat(o," - ").concat(a," of ").concat(i,")")},i={Active:{label:"Active",tone:"success"},Invited:{label:"Invited",tone:"info"},Paused:{label:"Paused",tone:"neutral"}},o=function(e,t,n){return 1===e?t:n}},87786:function(e,t,n){"use strict";n.r(t);var r=n(90849),i=n(2345),o=n(27378),a=n(86677),c=n(88039),l=n(32324),d=n(74578),u=n(50456),s=n(68944),m=n(51036),f=n(47586),h=n(81715),p=n(92100),v=n(73403),g=n(10957),b=n(77498),y=n(94303),Z=n(20329),S=n(20034),I=n(53169),B=n(40670),x=n(39395),k=n(15748),L=n(40582),C=n(59746),T=n(52948),w=n(72207),O=n(94736),_=n(87800);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E=function(){var e=(0,a.useRouter)(),t=(0,C.M)(),n=t.staffMembersGetState,r=t.staffMembersUpdate,x=(0,o.useState)(!1),X=x[0],E=x[1],P=(0,o.useMemo)(function(){return n().find(function(t){return t.name.toLowerCase().replaceAll(" ","-")===e.query.slug})},[e,n]),M=(0,c.cI)({defaultValues:{role:null==P?void 0:P.role,trainingCompleted:null==P?void 0:P.trainingCompleted},resolver:(0,l.F)(L.pp),mode:"onSubmit",reValidateMode:"onBlur"}),j=M.register,A=M.handleSubmit,F=M.reset;(0,o.useEffect)(function(){F({role:null==P?void 0:P.role,trainingCompleted:null==P?void 0:P.trainingCompleted})},[F,P]);var q=(0,o.useState)(!1),H=q[0],N=q[1];return P?(0,_.BX)(o.Fragment,{children:[(0,_.tZ)(B.$,{title:"View ".concat(P.name," | Staff")}),(0,_.BX)(d.PageContent,{children:[(0,_.BX)(u.Stack,{gap:3,children:[(0,_.tZ)(g.DirectionLink,{direction:"left",href:"/app/staff",children:"Back"}),(0,_.BX)(u.Stack,{alignItems:"start",gap:1.5,children:[(0,_.tZ)(k.V,{title:P.name,introduction:(0,_.BX)(s.Text,{children:["Change role or remove access for"," ",(0,_.tZ)(s.Text,{fontSize:"md",fontWeight:"bold",children:P.name}),"."]})}),(0,_.tZ)(b.StatusBadge,{tone:"infoMedium",label:"Invited"})]}),(0,_.BX)(u.Stack,{gap:2,children:[(0,_.tZ)(y.H2,{children:"Personal details"}),(0,_.BX)(Z.SummaryList,{children:[(0,_.BX)(Z.SummaryListItem,{children:[(0,_.tZ)(Z.SummaryListItemTerm,{children:"Name"}),(0,_.tZ)(Z.SummaryListItemDescription,{children:P.name})]}),(0,_.BX)(Z.SummaryListItem,{children:[(0,_.tZ)(Z.SummaryListItemTerm,{children:"Email"}),(0,_.tZ)(Z.SummaryListItemDescription,{children:P.email})]}),(0,_.BX)(Z.SummaryListItem,{children:[(0,_.tZ)(Z.SummaryListItemTerm,{children:"Mobile number"}),(0,_.tZ)(Z.SummaryListItemDescription,{children:P.mobile})]}),P.dateJoined&&(0,_.BX)(Z.SummaryListItem,{children:[(0,_.tZ)(Z.SummaryListItemTerm,{children:"Date joined"}),(0,_.tZ)(Z.SummaryListItemDescription,{children:(0,i.Z)(new Date(P.dateJoined),"d MMMM yyyy")})]})]})]}),(0,_.BX)(u.Stack,{gap:2,children:[(0,_.tZ)(y.H2,{children:"Remove access"}),(0,_.tZ)(s.Text,{as:"p",id:"remove-access-description",children:"Remove this personâ€˜s access to your business. You can invite them again at any time."}),(0,_.BX)(m.Button,{alignSelf:"start","aria-describedby":"remove-access-description",onClick:function(){E(!0)},size:"sm",variant:"secondary",children:["Remove ",P.name]})]}),(0,_.BX)(u.Stack,{as:"form",gap:2,onSubmit:A(function(t){N(!0),setTimeout(function(){N(!1),r({staffToUpdate:P,updates:t}),e.push("/app/staff?successType=update&staffId=".concat(P.id))},1500)}),noValidate:!0,children:[(0,_.tZ)(y.H2,{children:"Change role"}),(0,_.tZ)(S.Details,{iconBefore:!0,label:"Understanding the permissions for each role",children:(0,_.tZ)(O.u,{})}),(0,_.tZ)(p.ControlGroup,{label:"Export service role",required:!0,block:!0,children:["Manager","Employee","Trainee","Work experience"].map(function(e){return(0,_.tZ)(h.Radio,D(D({},j("role")),{},{value:e,children:e}),e)})}),(0,_.tZ)(y.H2,{children:"Training completed"}),(0,_.tZ)(p.ControlGroup,{label:"Training completed",block:!0,children:["Deliveries","Distribution","Ice cream making","Packaging"].map(function(e){return(0,_.tZ)(v.Checkbox,D(D({},j("trainingCompleted")),{},{value:e,children:e}),e)})}),(0,_.tZ)(I.Box,{paddingY:1,children:(0,_.tZ)(f.Divider,{})}),(0,_.BX)(m.ButtonGroup,{children:[(0,_.tZ)(m.Button,{type:"submit",loading:H,children:"Save changes"}),(0,_.tZ)(m.Button,{variant:"tertiary",onClick:function(){e.push("/app/staff")},children:"Cancel"})]})]})]}),(0,_.tZ)(w.E,{itemsToDelete:P,isOpen:X,onClose:function(){return E(!1)},onConfirm:function(){E(!1),e.push("/app/staff?successType=remove&staffId=".concat(P.id))}})]})]}):(0,_.tZ)(T.default,{})};t.default=E,E.getLayout=function(e){return(0,_.tZ)(x.L,{children:(0,_.tZ)(C.w,{children:e})})}},65385:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/staff/[slug]",function(){return n(87786)}])}},function(e){e.O(0,[4371,9998,9073,2345,1854,8486,7077,9395,5875,624,3881,2372,7178,9774,2888,179],function(){return e(e.s=65385)}),_N_E=e.O()}]);