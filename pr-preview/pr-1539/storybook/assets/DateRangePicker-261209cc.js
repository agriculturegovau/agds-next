import{t as ue,j as f,a as M,h as fe}from"./responsive-1d67a6a2.js";import{r as a}from"./index-42611d8b.js";import{S as ce,F as pe}from"./Stack-43f3e7c4.js";import{u as me}from"./useId-d335a68c.js";import{u as ge}from"./useTernaryState-6ea40a94.js";import{u as be}from"./useWindowSize-fbc787ee.js";import{u as he}from"./useClickOutside-f1a14f0e.js";import{c as ye,b as ve,d as Ie,a as Ve}from"./Field-20b34c68.js";import{v as Re}from"./VisuallyHidden-02be915e.js";import{u as we,P as ke}from"./Popover-7f6cfd9c.js";import{g as qe,f as W,t as w,p as P,c as $,D as z}from"./DatePickerInput-6534a915.js";import{C as De}from"./Calendar-0f15ac31.js";const A=({legend:n,hint:i,id:k,fromInvalid:b=!1,toInvalid:h=!1,message:I,hideOptionalLabel:q,value:r,onChange:o,onFromInputChange:V,onToInputChange:R,disabled:B,fromLabel:K="Start date",toLabel:U="End date",required:D=!1,minDate:s,maxDate:d,fromInputRef:G,toInputRef:J,yearRange:Q})=>{const[p,X,c]=ge(!1),j=p?c:X,[m,g]=a.useState(),_=a.useRef(null),T=a.useRef(null);function Y(){g("from"),j()}function Z(){g("to"),j()}const C=we(),u=a.useMemo(()=>({from:typeof r.from=="string"?void 0:r.from,to:typeof r.to=="string"?void 0:r.to}),[r]),ee=a.useCallback((l,e,y)=>{if(!m||y.disabled)return;const t=qe(m,e,u);if(o(t),S(t.from?W(t.from):""),F(t.to?W(t.to):""),t.from&&t.to){c(),g(void 0);return}if(m==="from"){g("to");return}if(m==="to"&&!t.from){g("from");return}},[c,m,o,u]),[te,S]=a.useState(w(r.from)),ae=a.useCallback(l=>{const e=l.target.value;S(e);const y=P(e),t=$(y,s,d),v={from:t,to:u.to};if(!e||t){o(v);return}o(v),V==null||V(e)},[d,s,o,u,V]),[ne,F]=a.useState(w(r.to)),re=a.useCallback(l=>{const e=l.target.value;F(e);const y=P(e),t=$(y,s,d),v={from:u.from,to:t};if(!e||t){o(v);return}o(v),R==null||R(e)},[d,s,o,R,u]);a.useEffect(()=>{S(w(r.from)),F(w(r.to))},[r]);const le=a.useCallback(()=>{p&&c()},[p,c]);he([C.popoverRef,_,T],le),a.useEffect(()=>{const l=e=>{p&&e.code==="Escape"&&(e.preventDefault(),e.stopPropagation(),c(),g(void 0))};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[p,c]);const ie=a.useMemo(()=>{if(s||d)return[s?{before:s}:void 0,d?{after:d}:void 0].filter(l=>!!l)},[s,d]),{windowWidth:oe=0}=be(),se=oe>ue.breakpoint.md?2:1,x=b||h,{fieldsetId:de,hintId:L,messageId:E}=O(k),H=[b&&I?E:null,i?L:null].filter(Boolean).join(" "),N=[h&&I?E:null,i?L:null].filter(Boolean).join(" ");return f(Ve,{invalid:x,id:de,children:M("fieldset",{css:{padding:0,margin:0,border:"none"},children:[f(ye,{as:"legend",required:D,hideOptionalLabel:q,css:n?void 0:Re,children:n??"Date range"}),M(ce,{gap:.5,css:{marginTop:n?fe(.5):void 0},children:[i?f(ve,{id:L,children:i}):null,I&&x?f(Ie,{id:E,children:I}):null,M(pe,{...C.getReferenceProps(),flexWrap:"wrap",inline:!0,gap:1,children:[f(z,{"aria-describedby":H.length>0?H:null,ref:G,label:K,hideOptionalLabel:q||!!n,value:te,onChange:ae,buttonRef:_,buttonOnClick:Y,disabled:B,required:D,invalid:{field:!1,input:b}}),f(z,{"aria-describedby":N.length>0?N:null,ref:J,label:U,hideOptionalLabel:q||!!n,value:ne,onChange:re,buttonRef:T,buttonOnClick:Z,disabled:B,required:D,invalid:{field:!1,input:h}})]})]}),p&&f(ke,{...C.getPopoverProps(),children:f(De,{initialFocus:!0,defaultMonth:u.from,selected:u,onSelect:ee,numberOfMonths:se,disabled:ie,returnFocusRef:m==="from"?_:T,yearRange:Q})})]})})};function O(n){const i=me(n),k=n||`date-range-picker-${i}`,b=`date-range-picker-${i}-hint`,h=`date-range-picker-${i}-message`;return{fieldsetId:k,hintId:b,messageId:h}}try{O.displayName="useDateRangePickerIds",O.__docgenInfo={description:"",displayName:"useDateRangePickerIds",props:{}}}catch{}try{A.displayName="DateRangePicker",A.__docgenInfo={description:"",displayName:"DateRangePicker",props:{minDate:{defaultValue:null,description:"If set, any days before this date will not be selectable.",name:"minDate",required:!1,type:{name:"Date"}},maxDate:{defaultValue:null,description:"If set, any days after this date will not be selectable.",name:"maxDate",required:!1,type:{name:"Date"}},legend:{defaultValue:null,description:"Describes the purpose of the group of fields.",name:"legend",required:!1,type:{name:"string"}},hint:{defaultValue:null,description:"Provides extra information about the group of fields.",name:"hint",required:!1,type:{name:"string"}},id:{defaultValue:null,description:"Defines an identifier (ID) which must be unique.",name:"id",required:!1,type:{name:"string"}},message:{defaultValue:null,description:"Message to show when the field is invalid.",name:"message",required:!1,type:{name:"string"}},fromInvalid:{defaultValue:{value:"false"},description:"If true, the invalid state will be rendered for the start date.",name:"fromInvalid",required:!1,type:{name:"boolean"}},toInvalid:{defaultValue:{value:"false"},description:"If true, the invalid state will be rendered for the end date.",name:"toInvalid",required:!1,type:{name:"boolean"}},hideOptionalLabel:{defaultValue:null,description:'If true, "(optional)" will never be appended to the legend even when `required` is `false`.',name:"hideOptionalLabel",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"If true, the field will not be interactive.",name:"disabled",required:!1,type:{name:"boolean"}},required:{defaultValue:{value:"false"},description:'If false, "(optional)" will not be appended to the legend.',name:"required",required:!1,type:{name:"boolean"}},value:{defaultValue:null,description:"The value of the field.",name:"value",required:!0,type:{name:"DateRangeWithString"}},onChange:{defaultValue:null,description:"Function to be fired following a change event.",name:"onChange",required:!0,type:{name:"(day: DateRange) => void"}},onFromInputChange:{defaultValue:null,description:"Function to be fired when the input value is updated.",name:"onFromInputChange",required:!1,type:{name:"((inputValue: string) => void)"}},onToInputChange:{defaultValue:null,description:"Function to be fired when the input value is updated.",name:"onToInputChange",required:!1,type:{name:"((inputValue: string) => void)"}},fromLabel:{defaultValue:{value:"Start date"},description:"The label above the start date.",name:"fromLabel",required:!1,type:{name:"string"}},toLabel:{defaultValue:{value:"End date"},description:"The label above the end date.",name:"toLabel",required:!1,type:{name:"string"}},fromInputRef:{defaultValue:null,description:"Ref to the start input element.",name:"fromInputRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},toInputRef:{defaultValue:null,description:"Ref to the end input element.",name:"toInputRef",required:!1,type:{name:"Ref<HTMLInputElement>"}},yearRange:{defaultValue:null,description:"The range of options to display in calendar year select.",name:"yearRange",required:!1,type:{name:"{ from: number; to: number; }"}}}}}catch{}export{A as D,O as u};
