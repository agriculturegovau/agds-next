import{j as e,a as o}from"./responsive-1d67a6a2.js";import{a as u}from"./ag.ds-next-react-stack.cjs-f6276bf7.js";import{a as d}from"./ag.ds-next-react-button.cjs-71677e19.js";import{a as g}from"./ag.ds-next-react-icon.cjs-3a9514e5.js";import{a as F}from"./ag.ds-next-react-heading.cjs-9a51b824.js";import{a as f}from"./ag.ds-next-react-box.cjs-cf28e632.js";import{b as O,c as w,F as R,d as C,e as b,f as v,g as B,h as T,i as G,A as H,j as W,k as Y,S as $}from"./ActiveFilters-866f068b.js";import{a as D}from"./ag.ds-next-react-core.cjs-8e1121e9.js";import{u as z,a as U}from"./react-spring-web.esm-e3dcc61e.js";import{r as x}from"./index-42611d8b.js";import{a as I}from"./ag.ds-next-react-flex.cjs-f2764eda.js";import{a as M}from"./ag.ds-next-react-date-range-picker.cjs-944d1122.js";import{a as E}from"./ag.ds-next-react-fieldset.cjs-04532315.js";import{a as N}from"./ag.ds-next-react-form-stack.cjs-5f348e3a.js";import{a as J}from"./ag.ds-next-react-divider.cjs-5607f66c.js";import{a as K}from"./ag.ds-next-react-section-alert.cjs-11772a39.js";import{a as Q}from"./ag.ds-next-react-checkbox.cjs-9719003c.js";const _=({children:t})=>e(u.Stack,{as:"section",gap:1,"aria-label":"data filtering",borderBottom:!0,paddingBottom:1.5,children:t}),A=({children:t})=>e(I.Flex,{columnGap:1,rowGap:1.5,alignItems:{xs:"stretch",lg:"flex-end"},justifyContent:{xs:"flex-start",md:"space-between"},flexDirection:{xs:"column",lg:"row"},children:t}),y=({children:t})=>e(I.Flex,{flexWrap:"wrap",columnGap:1,rowGap:1.5,flexDirection:{xs:"column",md:"row"},alignItems:{xs:"stretch",md:"flex-end"},children:t}),j=()=>{const{data:t}=O(),{toggleAllRowsSelected:r,isSelectAllCheckboxChecked:i,isSelectAllCheckboxIndeterminate:s}=V(t);return e(Q.Checkbox,{size:"sm",checked:i,indeterminate:s,onChange:r,children:"Select all rows"})};function V(t){const{selection:r,selectRows:i,clearRowSelections:s}=w(),a=x.useMemo(()=>t.map(m=>m.id),[t]),l=x.useMemo(()=>r.length>0,[r]),c=x.useMemo(()=>a.length<0&&a.every(m=>r.includes(m)),[a,r]);return{isSelectAllCheckboxChecked:c,isSelectAllCheckboxIndeterminate:c?!1:l,toggleAllRowsSelected:()=>{r.length==0?i(a):s()}}}const L="table-heading",xe=({selectable:t})=>o(u.Stack,{gap:1.5,children:[e(F.H2,{id:L,children:"Audits"}),e("div",{children:e(d.ButtonLink,{href:"#new",iconBefore:g.PlusIcon,children:"Create request"})}),o(u.Stack,{gap:0,children:[e(_,{children:o(A,{children:[o(y,{children:[e(R,{}),e(C,{})]}),e(b,{})]})}),t&&e(f.Box,{paddingLeft:.75,paddingY:.75,borderBottom:!0,children:e(j,{})}),e(v,{headingId:L})]}),e(B,{})]}),X=({ariaLabelledBy:t,id:r,isOpen:i})=>{const{filters:s,setFilter:a}=w(),l=x.useRef(null),c=D.usePrefersReducedMotion(),S=z({from:{display:"none",height:0},to:async n=>{var p;i&&await n({display:"block"}),await n({height:i?(p=l.current)==null?void 0:p.offsetHeight:0,immediate:c}),await n(i?{height:"auto"}:{display:"none"})}});return e(U.section,{id:r,"aria-labelledby":t,style:S,css:{overflow:"hidden"},children:o(I.Flex,{ref:l,columnGap:1,rowGap:1.5,alignItems:{xs:"stretch",md:"flex-end"},flexDirection:{xs:"column",md:"row"},background:"shade",flexWrap:"wrap",padding:1,rounded:!0,border:!0,borderColor:"muted",children:[e(T,{}),e(C,{}),e(M.DateRangePicker,{fromLabel:"Registered from",toLabel:"Registered to",hideOptionalLabel:!0,onChange:n=>a({requestDate:n}),onFromInputChange:n=>a({requestDate:{...s.requestDate,from:n}}),onToInputChange:n=>a({requestDate:{...s.requestDate,to:n}}),value:s.requestDate})]})})},P="table-heading",Se=({selectable:t})=>{const[r,i]=D.useToggleState(!1,!0),s="filter-button",a="filter-body";return o(u.Stack,{gap:1.5,children:[e(F.H2,{id:P,children:"Audits"}),e("div",{children:e(d.ButtonLink,{href:"#new",iconBefore:g.PlusIcon,children:"Create request"})}),o(u.Stack,{gap:0,children:[o(_,{children:[o(A,{children:[o(y,{children:[e(f.Box,{display:{xs:"block",lg:"none"},children:e(b,{})}),e(G,{}),e(R,{}),e(d.Button,{onClick:i,variant:"secondary",iconBefore:g.FilterIcon,iconAfter:r?g.ChevronUpIcon:g.ChevronDownIcon,"aria-label":"more filters",id:s,"aria-controls":a,"aria-expanded":r,children:r?"Hide filters":"Show filters"})]}),e(f.Box,{display:{xs:"none",lg:"block"},children:e(b,{})})]}),e(X,{id:a,ariaLabelledBy:s,isOpen:r}),e(H,{})]}),t&&e(f.Box,{paddingLeft:.75,paddingY:.75,borderBottom:!0,children:e(j,{})}),e(v,{selectable:t,headingId:P})]}),e(B,{})]})},Z=({isDrawerOpen:t,closeDrawer:r})=>{const{filters:i,setFilters:s,resetFilters:a}=w(),[l,c]=x.useState(i),S=()=>{s(l),r()},n=k=>{c({...l,...k})},p=()=>{a(),c({assignee:void 0,businessName:void 0,requestDate:{from:void 0,to:void 0},state:void 0,status:void 0,services:void 0,destinations:void 0})},m=()=>{r(),c(i)},h=()=>{throw new Error("Not implemented")};return e($,{value:{filters:l,setFilters:c,setFilter:n,sort:{field:"requestDate",order:"ASC"},setSort:h,removeFilter:h,resetFilters:h,pagination:{page:1,perPage:1},setPagination:h,selection:[],isRowSelected:h,toggleRowSelected:h,selectRows:h,clearRowSelections:h},children:e(K.Drawer,{title:"Filter by",isOpen:t,onDismiss:m,actions:o(d.ButtonGroup,{children:[e(d.Button,{onClick:S,children:"Apply filters"}),e(d.Button,{variant:"secondary",onClick:p,children:"Clear filters"}),e(d.Button,{variant:"tertiary",onClick:m,children:"Cancel"})]}),children:o(u.Stack,{gap:3,children:[e(E.Fieldset,{legend:"Fieldset",children:o(N.FormStack,{children:[e(R,{block:!0}),e(T,{block:!0}),e(W,{block:!0}),e(Y,{block:!0})]})}),e(J.Divider,{}),e(E.Fieldset,{legend:"Fieldset",children:o(N.FormStack,{children:[e(C,{block:!0}),e(M.DateRangePicker,{fromLabel:"Registered from",toLabel:"Registered to",onChange:k=>c({...l,requestDate:k}),value:l.requestDate})]})})]})})})},q="table-heading",be=({selectable:t,tableRef:r})=>{const[i,s,a]=D.useTernaryState(!1);return o(u.Stack,{gap:1.5,children:[e(F.H2,{id:q,children:"Audits"}),e("div",{children:e(d.ButtonLink,{href:"#new",iconBefore:g.PlusIcon,children:"Create request"})}),o(u.Stack,{gap:0,children:[o(_,{children:[o(A,{children:[o(y,{children:[e(G,{}),e(d.Button,{onClick:s,variant:"secondary",iconBefore:g.FilterIcon,children:"Show filters"})]}),e(b,{})]}),e(Z,{isDrawerOpen:i,closeDrawer:a}),e(H,{})]}),t&&e(f.Box,{padding:1,borderBottom:!0,children:e(j,{})}),e(v,{ref:r,headingId:q,selectable:t})]}),e(B,{})]})};export{xe as T,Se as a,be as b};
