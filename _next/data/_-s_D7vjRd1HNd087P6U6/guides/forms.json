{"pageProps":{"guide":{"slug":"forms","source":{"compiledSource":"var d=Object.defineProperty,u=Object.defineProperties;var c=Object.getOwnPropertyDescriptors;var n=Object.getOwnPropertySymbols;var i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;var m=(e,r,o)=>r in e?d(e,r,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[r]=o,t=(e,r)=>{for(var o in r||(r={}))i.call(r,o)&&m(e,o,r[o]);if(n)for(var o of n(r))s.call(r,o)&&m(e,o,r[o]);return e},l=(e,r)=>u(e,c(r));var p=(e,r)=>{var o={};for(var a in e)i.call(e,a)&&r.indexOf(a)<0&&(o[a]=e[a]);if(e!=null&&n)for(var a of n(e))r.indexOf(a)<0&&s.call(e,a)&&(o[a]=e[a]);return o};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(o){var a=o,{components:e}=a,r=p(a,[\"components\"]);return mdx(MDXLayout,l(t(t({},layoutProps),r),{components:e,mdxType:\"MDXLayout\"}),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},\"Note: The AgDS component library does not have any opinions for how form state should be handled. All of our form components have been designed to work with any form library.\")),mdx(\"h2\",null,\"1. Install AgDS packages\"),mdx(\"p\",null,\"Install the following packages by running the following command in your terminal:\"),mdx(\"pre\",null,mdx(\"code\",t({parentName:\"pre\"},{className:\"language-sh\"}),`yarn add @ag.ds-next/field @ag.ds-next/icon @ag.ds-next/text-input @ag.ds-next/button @ag.ds-next/form-stack @ag.ds-next/page-alert\n`)),mdx(\"h2\",null,\"2. Compose the user interface\"),mdx(\"p\",null,\"Using the \",mdx(\"inlineCode\",{parentName:\"p\"},\"TextInput\"),\", \",mdx(\"inlineCode\",{parentName:\"p\"},\"FormStack\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"Button\"),\" components, we can quickly compose the user interface for the form.\"),mdx(\"pre\",null,mdx(\"code\",t({parentName:\"pre\"},{className:\"language-tsx\"}),`import { Button, ButtonGroup } from '@ag.ds-next/button';\nimport { FormStack } from '@ag.ds-next/form-stack';\nimport { TextInput } from '@ag.ds-next/text-input';\n\nfunction FormExampleSignIn() {\n    return (\n        <form>\n            <FormStack>\n                <TextInput label=\"Email address\" type=\"email\" maxWidth=\"xl\" required />\n                <TextInput label=\"Password\" type=\"password\" maxWidth=\"xl\" required />\n                <ButtonGroup>\n                    <Button type=\"submit\">Sign in</Button>\n                </ButtonGroup>\n            </FormStack>\n        </form>\n    );\n}\n`)),mdx(\"h2\",null,\"3. Handling form state\"),mdx(\"p\",null,\"We will be using \",mdx(\"inlineCode\",{parentName:\"p\"},\"react-hook-form\"),\" for handling form state and \",mdx(\"inlineCode\",{parentName:\"p\"},\"yup\"),\" for handling client-side validation.\"),mdx(\"h3\",null,\"3.1 Install dependencies\"),mdx(\"p\",null,\"We need to install these new dependencies by running the following command in your terminal:\"),mdx(\"pre\",null,mdx(\"code\",t({parentName:\"pre\"},{className:\"language-sh\"}),`yarn add react-hook-form @hookform/resolvers yup\n`)),mdx(\"h3\",null,\"3.1 Define the form schema\"),mdx(\"p\",null,\"Yup is a schema builder for runtime value parsing and validation. Define a schema, transform a value to match, assert the shape of an existing value, or both. Yup schema are extremely expressive and allow modeling complex, interdependent validations, or value transformation.\"),mdx(\"p\",null,\"In this step, we will be creating a form schema for the \",mdx(\"inlineCode\",{parentName:\"p\"},\"email\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"password\"),\" form fields with some simple validation.\"),mdx(\"p\",null,\"For more information about \",mdx(\"inlineCode\",{parentName:\"p\"},\"yup\"),\", please refer to the \",mdx(\"a\",t({parentName:\"p\"},{href:\"https://github.com/jquense/yup\"}),\"official documentation\")),mdx(\"pre\",null,mdx(\"code\",t({parentName:\"pre\"},{className:\"language-tsx\"}),`import * as yup from 'yup';\n\nconst formSchema = yup\n    .object({\n        email: yup\n            .string()\n            .email('Invalid email address')\n            .required('Enter your email address'),\n        password: yup.string().required('Enter your password'),\n    })\n    .required();\n\ntype FormSchema = yup.InferType<typeof formSchema>;\n`)),mdx(\"h3\",null,\"3.3 Handling form state\"),mdx(\"p\",null,\"In this step, we will be managing our form state with \",mdx(\"inlineCode\",{parentName:\"p\"},\"react-hook-form\"),\", a performant, flexible and extensible library for handling form state. For more information about \",mdx(\"inlineCode\",{parentName:\"p\"},\"react-hook-form\"),\", please refer to the \",mdx(\"a\",t({parentName:\"p\"},{href:\"https://react-hook-form.com/\"}),\"official documentation\")),mdx(\"p\",null,\"Since we are already using \",mdx(\"inlineCode\",{parentName:\"p\"},\"yup\"),\" for client-side validation, we have added \",mdx(\"a\",t({parentName:\"p\"},{href:\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#attr-novalidate\"}),mdx(\"inlineCode\",{parentName:\"a\"},\"noValidate\")),\" to our form element which disabled native browser validation.\"),mdx(\"pre\",null,mdx(\"code\",t({parentName:\"pre\"},{className:\"language-tsx\"}),`import { useForm, SubmitHandler } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { Button, ButtonGroup } from '@ag.ds-next/button';\nimport { FormStack } from '@ag.ds-next/form-stack';\nimport { TextInput } from '@ag.ds-next/text-input';\n\nconst formSchema = yup\n    .object({\n        email: yup\n            .string()\n            .email('Invalid email address')\n            .required('Enter your email address'),\n        password: yup.string().required('Enter your password'),\n    })\n    .required();\n\ntype FormSchema = yup.InferType<typeof formSchema>;\n\nexport function FormExampleSignIn() {\n    const {\n        register,\n        handleSubmit,\n        formState: { errors },\n    } = useForm<FormSchema>({\n        resolver: yupResolver(formSchema),\n    });\n\n    const onSubmit: SubmitHandler<FormSchema> = (data) => {\n        console.log(data);\n    };\n\n    return (\n        <form onSubmit={handleSubmit(onSubmit)} noValidate>\n            <FormStack>\n                <TextInput\n                    label=\"Email address\"\n                    type=\"email\"\n                    {...register('email')}\n                    maxWidth=\"xl\"\n                    required\n                />\n                <TextInput\n                    label=\"Password\"\n                    type=\"password\"\n                    {...register('password')}\n                    maxWidth=\"xl\"\n                    required\n                />\n                <ButtonGroup>\n                    <Button type=\"submit\">Sign in</Button>\n                </ButtonGroup>\n            </FormStack>\n        </form>\n    );\n}\n`)),mdx(\"h3\",null,\"4. Handling invalid states\"),mdx(\"p\",null,\"By making use of the \",mdx(\"inlineCode\",{parentName:\"p\"},\"invalid\"),\" and \",mdx(\"inlineCode\",{parentName:\"p\"},\"message\"),\" props available to the \",mdx(\"inlineCode\",{parentName:\"p\"},\"TextInput\"),\" component, we can let the user know they have an invalid form.\"),mdx(\"p\",null,\"We have also added a \",mdx(\"inlineCode\",{parentName:\"p\"},\"PageAlert\"),\" to the top of the form which lists out all form errors.\"),mdx(\"pre\",null,mdx(\"code\",t({parentName:\"pre\"},{className:\"language-tsx\"}),`import { useEffect, useRef, useState } from 'react';\nimport { useForm, SubmitHandler, SubmitErrorHandler } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { Button, ButtonGroup } from '@ag.ds-next/button';\nimport { Stack } from '@ag.ds-next/box';\nimport { FormStack } from '@ag.ds-next/form-stack';\nimport { TextInput } from '@ag.ds-next/text-input';\nimport { useScrollToField } from '@ag.ds-next/field';\nimport { PageAlert } from '@ag.ds-next/page-alert';\nimport { Prose } from '@ag.ds-next/prose';\n\nconst formSchema = yup\n    .object({\n        email: yup\n            .string()\n            .email('Invalid email address')\n            .required('Enter your email address'),\n        password: yup.string().required('Enter your password'),\n    })\n    .required();\n\ntype FormSchema = yup.InferType<typeof formSchema>;\n\nexport function FormExampleSignIn() {\n    const errorPageAlertRef = useRef<HTMLDivElement>(null);\n    const [hasFocusedErrorRef, setHasFocusedErrorRef] = useState(false);\n    const scrollToField = useScrollToField();\n\n    const {\n        register,\n        handleSubmit,\n        formState: { errors },\n    } = useForm<FormSchema>({\n        resolver: yupResolver(formSchema),\n    });\n\n    const onSubmit: SubmitHandler<FormSchema> = (data) => {\n        console.log(data);\n    };\n\n    const onError: SubmitErrorHandler<FormSchema> = (errors, event) => {\n        console.log(errors, event);\n        setHasFocusedErrorRef(false);\n    };\n\n    // Only show the page alert if there is more than 1 error\n    const hasErrors = Object.keys(errors).length > 1;\n\n    useEffect(() => {\n        if (!(hasErrors || hasFocusedErrorRef)) return;\n        errorPageAlertRef.current?.focus();\n        setHasFocusedErrorRef(true);\n    }, [hasFocusedErrorRef, hasErrors]);\n\n    return (\n        <Stack gap={3}>\n            {hasErrors && (\n                <PageAlert\n                    ref={errorPageAlertRef}\n                    tabIndex={-1}\n                    tone=\"error\"\n                    title=\"There is a problem\"\n                >\n                    <Prose>\n                        <p>Please correct the following fields and try again</p>\n                        <ul>\n                            {Object.entries(errors).map(([key, value]) => (\n                                <li key={key}>\n                                    <a href={\\`#\\${key}\\`} onClick={scrollToField}>\n                                        {value.message}\n                                    </a>\n                                </li>\n                            ))}\n                        </ul>\n                    </Prose>\n                </PageAlert>\n            )}\n            <form onSubmit={handleSubmit(onSubmit, onError)} noValidate>\n                <FormStack>\n                    <TextInput\n                        label=\"Email address\"\n                        type=\"email\"\n                        {...register('email')}\n                        invalid={Boolean(errors.email?.message)}\n                        message={errors.email?.message}\n                        maxWidth=\"xl\"\n                        required\n                    />\n                    <TextInput\n                        label=\"Password\"\n                        type=\"password\"\n                        {...register('password')}\n                        invalid={Boolean(errors.password?.message)}\n                        message={errors.password?.message}\n                        maxWidth=\"xl\"\n                        required\n                    />\n                    <ButtonGroup>\n                        <Button type=\"submit\">Sign in</Button>\n                    </ButtonGroup>\n                </FormStack>\n            </form>\n        </Stack>\n    );\n}\n`)),mdx(\"h2\",null,\"What's next?\"),mdx(\"p\",null,\"Take a look at our wide range of \",mdx(\"a\",t({parentName:\"p\"},{href:\"https://steelthreads.github.io/agds-next/packages/forms\"}),\"form components\"),\", and install the ones you need in your application.\"),mdx(\"blockquote\",null,mdx(\"p\",{parentName:\"blockquote\"},\"We recommend using TypeScript to get the most out of these components.\")),mdx(\"p\",null,\"If you get stuck, feel free to reach out to us in the Design System Teams Chat.\"))}MDXContent.isMDXComponent=!0;\n","scope":{"order":5,"title":"Forms","description":"Web forms are one of the main points of interaction between a user and a web site or application. In this guide, we will be building a simple sign in form using two popular libraries react-hook-form and yup."}},"data":{"order":5,"title":"Forms","description":"Web forms are one of the main points of interaction between a user and a web site or application. In this guide, we will be building a simple sign in form using two popular libraries react-hook-form and yup."},"title":"Forms","description":"Web forms are one of the main points of interaction between a user and a web site or application. In this guide, we will be building a simple sign in form using two popular libraries react-hook-form and yup."},"guideLinks":[{"href":"/guides/getting-started","label":"Getting started"},{"href":"/guides/contribution","label":"Contribution guidelines"},{"href":"/guides/design-principles","label":"Design Principles"},{"href":"/guides/figma","label":"Figma library"},{"href":"/guides/forms","label":"Forms"},{"href":"/guides/responsive-props","label":"Responsive props"}],"breadcrumbs":[{"href":"/","label":"Home"},{"href":"/guides","label":"Guides"},{"label":"Forms"}],"slug":"forms"},"__N_SSG":true}