---
title: File upload
description: The File upload component allows users to attach multiple files to a form via drag-and-drop or by browsing the device.
group: Forms
storybookPath: /story/forms-fileupload--basic
figmaGalleryNodeId: 12444%3A100384
relatedComponents: ['file-input']
---

```jsx live
<FileUpload
	label="Avatar image"
	hint="Formats accepted: .png, .jpg, .jpeg"
	multiple={false}
	accept={['image/jpeg', 'image/png']}
/>
```

File upload is used in forms to enable users to upload files they need. There are 2 ways to upload - via drag and drop or file selection via search.

`FileUpload` is a [controlled component](https://reactjs.org/docs/forms.html#controlled-components).

<DoHeading />

- upload selected files instantly as they are selected or on submission
- specify accepted file types, maximum file size and whether the user can upload one file at a time or several at once
- include hint text to provide more general information about the field/file
- indicate file uploading state
- indicate a successful file upload using a [Page alert](/components/page-alert), including file name
- indicate unsuccessful file uploads using a [Page alert](/components/page-alert) with a meaningful error message, solution and support contact
- Make use of the 'instant upload' pattern if your backend supports it
- Consider the 'simple download' pattern for small screens

<DontHeading />

- add a standalone Submit file button inside a form
- include other unrelated fields on the page
- use in modals or page alerts
- change the default behaviour of the component by adding a standalone upload file button.

## Indicating upload status

When using FileUpload, you need to consider how to communicate to the user that the upload is in progress. Otherwise the page will appear "frozen" as the operation happens in the background.

### Uploading on submission

In this example, we are submitting a file as part of a typical form submission to an API.

We recommend wrapping the FileUpload in a [LoadingBlanket](/components/loading) as the form submits, to indicate to the user that any delays are being caused by a potentially larger file being uploaded. If your backend system supports it, you can also use this UI to indicate upload status as a percentage.

As normal, we indicate that the form is submitting by adding a `loading={true}` to the submit button. This will show animated dots to signify that the user has to wait for the operation to complete.

```jsx live
<FormStack>
	<div style={{ position: 'relative' }}>
		<FileUpload
			label="Avatar image"
			hint="Formats accepted: .png, .jpg, .jpeg"
			multiple={false}
			accept={['image/jpeg' 'image/png']}
		/>
		<LoadingBlanket label="Uploading file (53%)" />
	</div>
	<div>
		<Button loading={true}>Submit</Button>
	</div>
</FormStack>
```

### Uploading files instantly

In this example, the file is instantly uploaded to a file hosting service, and the URL of the uploaded asset would be added to the form for submission. This means the form should not be allowed to submit until all assets are uploaded, but that the submission should be very quick as it's only text content being submitted.

`FileUpload` component allows you to indicate the status of an upload via a `file.status` property.

```jsx live
() => {
	const uploadingFile = new File(['this is an example file'], 'example.jpg', {
		type: 'image/jpeg',
	});
	uploadingFile.status = 'uploading';
	const uploadedFile = new File(
		['this is another example file that has uploaded'],
		'example.jpg',
		{
			type: 'image/jpeg',
		}
	);
	uploadedFile.status = 'success';
	return (
		<FileUpload
			label="Avatar image"
			hint="Formats accepted: .png, .jpg, .jpeg"
			multiple={false}
			accept={['image/jpeg', 'image/png']}
			value={[uploadedFile, uploadingFile]}
			onChange={console.log}
		/>
	);
};
```

## Multiple files

Selecting multiple files is also supported with FileUpload. Simply add `multiple={true}`, and you can select as many files as you want. You can also set `maxFiles` to limit how many files can be selected.

```jsx
<FileUpload multiple={true} maxFiles={3} />
```

## Maximum file size

Use the `maxSize` prop to set a maximum size for each file. This value is measured in kilobytes (kB).

```jsx
<FileUpload maxSize={200} /> // 200kB
<FileUpload maxSize={20000} /> // 20MB
```

## Accepted files

Use the `accept` prop to specify what file types are allowed to be selected. Each item in the array should be a [MIME type](https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types).

For the full list of accepted MIME types, please refer to code [here](https://github.com/steelthreads/agds-next/blob/main/packages/react/src/file-upload/utils.tsx).

```jsx
<FileUpload accept={['image/jpeg', 'image/png']} />
```

### Advanced MIME types

You can extend the list of accepted MIME types if the file type you need to support is not included in the predefined list.

To do this, pass an object instead of a string with `mimeType` and `extensions` as keys. Optionally, a `label` key can be used for the summary inside of the component, e.g. "Any font file"

```jsx
<FileUpload accept={[{ mimeType: 'text/javascript', extensions: ['.js'] }]} />
```
